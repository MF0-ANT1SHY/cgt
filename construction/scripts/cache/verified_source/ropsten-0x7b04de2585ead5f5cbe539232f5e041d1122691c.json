{"status": "1", "message": "OK", "result": [{"SourceCode": "pragma solidity ^0.4.23;\r\n\r\n/*\r\n * \u4ee5\u592a\u574a\u4e0a\u7684\u53bb\u4e2d\u5fc3\u5316\u7ade\u731c\u5408\u7ea6\r\n * @Author Leo Ning <windywany@gmail.com>\r\n * @Data 2018-07-06\r\n */\r\ncontract TrustBet {\r\n    address     public owner;//\u5408\u7ea6\u6240\u6709\u8005\r\n    bool        public stop      = false;//\u662f\u5426\u505c\u6b62\u7ade\u731c\r\n    uint8       public winTeam   = 3;//\u6bd4\u8d5b\u7ed3\u679c\uff1a3\u672a\u5f00\u5956\uff1b0:1\u961f\u80dc\uff1b1:2\u961f\u80dc\uff1b2:2\u961f\u5e73\r\n    uint256     public stopWithdrawBlock = 0;//\u505c\u6b62\u63d0\u73b0\u533a\u5757\r\n    mapping(uint8 => mapping(address=>uint256)) public stakes;//\u7ade\u731c\u91d1\u989d\r\n    uint256[3] public teamStakes;//\u6bcf\u961f\u7ade\u731c\u91d1\u989d\r\n    \r\n    //\u53ea\u80fd\u5408\u7ea6\u6240\u6709\u8005\u6267\u884c\u7684\u65b9\u6cd5\r\n    modifier owned {\r\n        require(owner == msg.sender);\r\n        _;\r\n    }\r\n\r\n    //\u521b\u5efa\u53ef\u4fe1\u4efb\u7ade\u731c\u5408\u7ea6\r\n    constructor () public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    //\u505c\u6b62\u7ade\u731c\uff08\u53d1\u8d77\u4eba\u8c03\u7528\uff09\r\n    function stopBet() public owned {\r\n        stop = true;\r\n    }\r\n\r\n    // \u5f00\u5956\uff08\u53d1\u8d77\u4eba\u8c03\u7528\uff09\uff0cteam=0\u65f61\u961f\u8d62\uff0cteam=1\u65f62\u961f\u8d62,team=2\u65f62\u961f\u6253\u5e73\r\n    function lottery(uint8 team) public owned {\r\n        //\u5df2\u7ecf\u505c\u6b62\u7ade\u731c\u4e14team\u6b63\u786e\u624d\u80fd\u5f00\u5956\r\n        require(stop && team < 3);\r\n        //\u8d62\u7684\u961f\u4f0d\r\n        winTeam = team;\r\n        //130000\u4e2a\u533a\u5757\u4e4b\u540e\u505c\u6b62\u63d0\u73b0(\u5927\u6982\u5f00\u5956\u540e15\u5929\u5185)\r\n        stopWithdrawBlock = block.number + 130000;\r\n    }\r\n\r\n    //\u7ade\u731c\uff0cteam=0\u65f61\u961f\u8d62\uff0cteam=1\u65f62\u961f\u8d62,team=2\u65f6\u6253\u5e73\r\n    function bet(uint8 team) public payable {\r\n        //\u672a\u505c\u6b62\u7ade\u731c\u4e14team\u6b63\u786e\r\n        require(!stop && team < 3 && msg.value >= 0.01 ether);\r\n        //\u7528\u6237\u7ade\u731c\u603b\u989d\r\n        stakes[team][msg.sender] += msg.value;\r\n        //\u961f\u4f0d\u7ade\u731c\u603b\u989d\r\n        teamStakes[team] += msg.value;\r\n    }\r\n\r\n    //\u63d0\u53d6\u5956\u91d1\r\n    function withdraw() public returns (uint256) {\r\n        //\u5f00\u595626000\u4e2a\u533a\u5757\u5185\u4e00\u5b9a\u8981\u63d0\u73b0\u4e14\u8981\u731c\u4e2d\r\n        require(stopWithdrawBlock>=block.number && stakes[winTeam][msg.sender]>0);\r\n        //\u7ade\u731c\u91d1\u989d\r\n        uint256 myStake = stakes[winTeam][msg.sender];\r\n        //\u94b1\u5206\u5b8c\u4e86\uff0c\u4e0d\u80fd\u518d\u5206\u55bd\uff0c\u5982\u679c\u4f60\u6709GAS\uff0c\u4f60\u53ef\u4ee5\u65e0\u9650\u6b21\u8c03\u7528\u6b64\u65b9\u6cd5\r\n        stakes[winTeam][msg.sender] = 0;\r\n        //\u8ba1\u7b97\u5956\u91d1\r\n        uint256 win = myStake * (teamStakes[0] + teamStakes[1] + teamStakes[2]) / teamStakes[winTeam];\r\n        //\u6263\u9664\u767e\u5206\u4e4b\u4e00\u7684\u624b\u7eed\u8d39\u540e\u7684\u91d1\u989d\r\n        uint256 amount = win - win * 1 / 100;\r\n        //\u5956\u91d1\u8981\u5927\u5c0f0\uff08^_^\uff09\r\n        assert(amount > 0);\r\n        //\u6709\u4f59\u989d\u624d\u80fd\u5206\r\n        if(address(this).balance > amount){\r\n            msg.sender.transfer(amount);\r\n            return amount;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    //\u63d0\u53d6\u4f63\u91d1\r\n    function commission() public {\r\n        //\u5f00\u595626000\u4e2a\u533a\u5757\u4e4b\u540e\uff0c\u7ade\u731c\u53d1\u8d77\u4eba\u53ef\u4ee5\u63d0\u53d6\u4f63\u91d1\r\n        require(winTeam < 3 && stopWithdrawBlock<block.number && address(this).balance>0);\r\n        owner.transfer(address(this).balance);\r\n    }\r\n}", "ABI": "[{\"constant\":true,\"inputs\":[],\"name\":\"stop\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"stopWithdrawBlock\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"withdraw\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"stopBet\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"winTeam\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"teamStakes\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"team\",\"type\":\"uint8\"}],\"name\":\"lottery\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"address\"}],\"name\":\"stakes\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"team\",\"type\":\"uint8\"}],\"name\":\"bet\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"commission\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]", "ContractName": "TrustBet", "CompilerVersion": "v0.4.23+commit.124ca40d", "OptimizationUsed": "1", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": "bzzr://a44dea106f9ec00c8f7b904870e7a6bf373fba0b4b13c55d9de62fac0dec5093"}]}